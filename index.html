// --- MODIFICACIÓN EN LA FUNCIÓN loadData() ---
// Reemplazá tu función loadData() por esta para que intercale publicidad:

function loadData() {
    db.on('value', snap => {
        const list = snap.val() ? Object.values(snap.val()) : [];
        const tF = document.getElementById('f-type').value;
        const oF = document.getElementById('f-op').value;
        map.eachLayer(l => { if(l instanceof L.Marker && l !== tempM) map.removeLayer(l); });
        
        let html = "";
        let adCounter = 0; // Contador para meter publicidad

        list.reverse().forEach((p, i) => {
            if(tF !== 'todos' && p.type !== tF) return;
            if(oF !== 'todos' && p.op !== oF) return;

            // Marcador en el mapa
            var m = L.marker([p.lat, p.lng]).addTo(map);
            setTimeout(() => { if(m.getElement()) m.getElement().classList.add('pin-' + p.type); }, 100);
            
            m.bindPopup(`<div style="width:130px"><p class="font-black text-indigo-600 text-[10px] uppercase">${p.title}</p><p class="font-bold text-sm mb-2">U$D ${p.price}</p><button onclick="triggerConsult('${p.wa}')" class="bg-indigo-600 text-white w-full py-2 rounded-lg text-[10px] font-bold">WHATSAPP</button></div>`);

            // HTML de la propiedad
            html += `
            <div class="bg-white rounded-[2rem] p-3 shadow-sm border border-slate-100">
                <img src="${p.img}" onerror="this.src='https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=500'" class="w-full h-44 object-cover rounded-3xl mb-3">
                <div class="px-2">
                    <div class="flex justify-between items-center mb-1">
                        <h4 class="font-black text-sm uppercase text-slate-700 truncate">${p.title}</h4>
                        <span class="text-[9px] font-black ${p.type === 'terreno' ? 'bg-green-100 text-green-600' : 'bg-indigo-100 text-indigo-600'} px-2 py-1 rounded-full uppercase">${p.type}</span>
                    </div>
                    <p class="text-2xl font-black text-indigo-600 mb-4">U$D ${p.price}</p>
                    <button onclick="triggerConsult('${p.wa}')" class="w-full bg-slate-900 text-white py-4 rounded-2xl font-black uppercase text-[10px] shadow-lg">Consultar ahora</button>
                </div>
            </div>`;

            // CADA 3 PROPIEDADES, INSERTAMOS UN ANUNCIO
            adCounter++;
            if(adCounter % 3 === 0) {
                html += `
                <div class="p-4 bg-slate-200 rounded-3xl text-center my-4 overflow-hidden" style="min-height:100px">
                    <p class="text-[9px] text-slate-400 mb-2 font-bold uppercase tracking-widest">Publicidad Sugerida</p>
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-format="fluid"
                         data-ad-layout-key="-fb+5w+4e-db+86"
                         data-ad-client="ca-pub-5719496512652584"
                         data-ad-slot="auto"></ins>
                    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                </div>`;
            }
        });
        document.getElementById('l-container').innerHTML = html || "<p class='text-center py-10'>No hay propiedades.</p>";
    });<footer class="p-6 text-center text-slate-400 text-[10px] pb-32">
    <p>© 2026 TandilProp - Inmuebles en Tandil</p>
    <div class="flex justify-center gap-4 mt-2">
        <a href="#" class="underline">Privacidad</a>
        <a href="#" class="underline">Términos</a>
        <a href="#" class="underline">Contacto</a>
    </div>
    </footer>

}
